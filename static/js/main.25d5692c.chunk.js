(this["webpackJsonpasaf-dulman-04-10-21"]=this["webpackJsonpasaf-dulman-04-10-21"]||[]).push([[0],{43:function(e,t,r){},69:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),c=r(22),i=r.n(c),s=(r(43),r(2)),o=r.n(s),u=r(5),l=r(6),f=r(4),v=r(15),d={SET_SEARCH_CITIES_LIST:"SET_SEARCH_CITIES_LIST",SET_SELECTED_CITY:"SET_SELECTED_CITY",SET_SELECTED_CITY_CONDITIONS:"SET_SELECTED_CITY_CONDITIONS",SET_FAVORITES_CITIES:"SET_FAVORITES_CITIES",TOGGLE_TEMPERATUREVALUE_VALUE:"TOGGLE_TEMPERATUREVALUE_VALUE",TOGGLE_DARK_MODE:"TOGGLE_DARK_MODE"};function p(e){return function(){var t=Object(u.a)(o.a.mark((function t(r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:d.SET_SEARCH_CITIES_LIST,cities:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function b(e){return function(){var t=Object(u.a)(o.a.mark((function t(r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:d.SET_SELECTED_CITY,selectedCity:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function j(e){return function(){var t=Object(u.a)(o.a.mark((function t(r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:d.SET_SELECTED_CITY_CONDITIONS,selectedCityConditions:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}var O=r(1);function h(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.weatherReducer.isDarkMode})),r=function(){var r;e((r=!t,function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:d.TOGGLE_DARK_MODE,isDarkMode:r});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))};return Object(O.jsxs)("div",{className:"nav-bar-box",children:[Object(O.jsx)("div",{className:"logo-box",children:"MyWeatherApp"}),Object(O.jsxs)("div",{className:"nav-links-box",children:[Object(O.jsx)(v.b,{exact:!0,to:"/",children:"Home"}),Object(O.jsx)(v.b,{to:"/favorites",children:"Favorites"}),Object(O.jsx)("button",{onClick:function(){return r()},children:t?"Light":"Dark"})]})]})}var x=r(13),C=r(18),E=r.n(C),m={getSearchCitiesList:function(e){return y.apply(this,arguments)},getCurrentConditions:function(e){return T.apply(this,arguments)},getDailyForecast:function(e){return g.apply(this,arguments)},getCurrentLocationWeather:function(e){return S.apply(this,arguments)}};function y(){return(y=Object(u.a)(o.a.mark((function e(t){var r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r="https://dataservice.accuweather.com/locations/v1/cities/autocomplete?apikey=mlVMZtayZdElb8tDwwm2AdErMADsCHOf&q=".concat(t,"&language=en-us"),t){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,E.a.get(r);case 6:return n=e.sent,e.abrupt("return",n.data);case 10:return e.prev=10,e.t0=e.catch(3),console.log(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}function T(){return(T=Object(u.a)(o.a.mark((function e(t){var r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://dataservice.accuweather.com/currentconditions/v1/".concat(t,"?apikey=mlVMZtayZdElb8tDwwm2AdErMADsCHOf"),e.prev=1,e.next=4,E.a.get(r);case 4:return n=e.sent,e.abrupt("return",n.data[0]);case 8:return e.prev=8,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function g(){return(g=Object(u.a)(o.a.mark((function e(t){var r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://dataservice.accuweather.com/forecasts/v1/daily/5day/".concat(null===t||void 0===t?void 0:t.Key,"?apikey=mlVMZtayZdElb8tDwwm2AdErMADsCHOf"),e.prev=1,e.next=4,E.a.get(r);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}function S(){return(S=Object(u.a)(o.a.mark((function e(t){var r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="https://dataservice.accuweather.com/locations/v1/cities/geoposition/search?apikey=mlVMZtayZdElb8tDwwm2AdErMADsCHOf&q=".concat(t.lat,"%2C").concat(t.lng),e.prev=1,e.next=4,E.a.get(r);case 4:return n=e.sent,e.abrupt("return",n.data);case 8:return e.prev=8,e.t0=e.catch(1),console.log(e.t0),e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))).apply(this,arguments)}var w=r(25),_={saveFavoriteCityToStorage:function(e,t){var r=I("favoriteCities");r=[].concat(Object(w.a)(r),[t]),localStorage.setItem(e,JSON.stringify(r))},loadFavoritesCititesList:I,toggleFavoriteCity:function(e){var t=I("favoriteCities");if(!t)return t=[e],localStorage.setItem("favoriteCities",JSON.stringify(t)),t;var r=t.findIndex((function(t){return t.Key===e.Key}));r>-1?(t.splice(r,1),localStorage.setItem("favoriteCities",JSON.stringify(t))):(t=[].concat(Object(w.a)(t),[e]),localStorage.setItem("favoriteCities",JSON.stringify(t)));return Object(w.a)(t)},isFavoriteCity:function(e){var t=I("favoriteCities");if(!t)return;return t.some((function(t){return t.Key===(null===e||void 0===e?void 0:e.Key)}))}};function I(e){var t=localStorage.getItem(e);return JSON.parse(t)}function D(e){return function(){var t=Object(u.a)(o.a.mark((function t(r){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r({type:d.SET_FAVORITES_CITIES,favoriteCities:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function L(e){var t,r=e.favoriteCity,a=Object(n.useState)(),c=Object(x.a)(a,2),i=c[0],s=c[1],v=Object(f.f)(),d=Object(l.b)();Object(n.useEffect)((function(){p()}),[]);var p=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getCurrentConditions(r.Key);case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"favorites-preview-box",onClick:function(){return d(b(r)),d(j(i)),void v.push("/")},children:[Object(O.jsxs)("p",{children:["ID - ",r.Key]}),Object(O.jsx)("h2",{children:null===r||void 0===r?void 0:r.LocalizedName}),Object(O.jsx)("h3",{children:null===i||void 0===i?void 0:i.WeatherText}),Object(O.jsxs)("p",{children:[null===i||void 0===i||null===(t=i.Temperature)||void 0===t?void 0:t.Metric.Value,"\xb0c"]}),Object(O.jsx)("button",{onClick:function(e){return function(e){e.stopPropagation();var t=_.toggleFavoriteCity(r);d(D(t))}(e)},children:"Remove From Favorites"})]})}function k(e){var t=e.favoriteCities;return Object(O.jsx)("div",{className:"favorites-list-box",children:null===t||void 0===t?void 0:t.map((function(e){return Object(O.jsx)(L,{favoriteCity:e},e.Key)}))})}function N(){var e=Object(l.c)((function(e){return e.favoritesReducer.favoriteCities})),t=Object(l.b)();Object(n.useEffect)((function(){r()}),[]);var r=function(){var e=_.loadFavoritesCititesList("favoriteCities");t(D(e))};return Object(O.jsxs)("div",{className:"favorites-box",children:[Object(O.jsx)("h1",{children:"My Cities"}),Object(O.jsx)(k,{favoriteCities:e})]})}function A(e){var t=e.city,r=Object(l.b)(),n=function(){var e=Object(u.a)(o.a.mark((function e(){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r(b(t)),e.next=3,m.getCurrentConditions(t.Key);case 3:n=e.sent,r(j(n)),r(p(""));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)("div",{onClick:function(){return n()},className:"search-city-preview-box",children:Object(O.jsx)("p",{children:t.LocalizedName})})}function R(){var e=Object(l.c)((function(e){return e.weatherReducer.searchCities}));return Object(O.jsx)("div",{className:"search-cities-box",children:(null===e||void 0===e?void 0:e.length)?null===e||void 0===e?void 0:e.map((function(e){return Object(O.jsx)(A,{city:e},e.Key)})):""})}function M(e){var t=e.forecast,r=function(e){return(5*(e-32)/9).toFixed(0)};return Object(O.jsxs)("div",{className:"daily-forecast-preview-box",children:[Object(O.jsx)("h3",{children:function(){var e=t.Date,r=e.split("T");return r=(e=r[0]).split("-"),e=r.reverse().join("/")}()}),Object(O.jsx)("img",{src:function(){var e=t.Day.Icon;return e<10&&(e="0"+e),"https://developer.accuweather.com/sites/default/files/".concat(e,"-s.png")}(),alt:""}),Object(O.jsx)("p",{children:t.Day.IconPhrase}),Object(O.jsxs)("p",{children:[r(null===t||void 0===t?void 0:t.Temperature.Minimum.Value),"\xb0c - ",r(t.Temperature.Maximum.Value),"\xb0c "]})]})}function F(e){var t=e.forecastList;return Object(O.jsx)("div",{className:"daily-forecast-list-box",children:null===t||void 0===t?void 0:t.map((function(e){return Object(O.jsx)(M,{forecast:e},e.EpochDate)}))})}function V(){var e,t=Object(n.useState)(),r=Object(x.a)(t,2),a=r[0],c=r[1],i=Object(n.useState)(),s=Object(x.a)(i,2),f=s[0],v=s[1],d=Object(l.c)((function(e){return e.weatherReducer.selectedCityConditions})),p=Object(l.c)((function(e){return e.weatherReducer.selectedCity})),b=Object(l.b)();Object(n.useEffect)((function(){c(_.isFavoriteCity(p)),j()}),[p]);var j=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.getDailyForecast(p);case 2:t=e.sent,v(t.DailyForecasts);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{className:"current-weather-box",children:[a&&Object(O.jsx)("i",{className:"fas fa-star favorite-icon"}),Object(O.jsx)("h1",{children:p?null===p||void 0===p?void 0:p.LocalizedName:"Tel-Aviv"}),Object(O.jsx)("p",{children:null===d||void 0===d?void 0:d.WeatherText}),Object(O.jsxs)("p",{children:[null===d||void 0===d||null===(e=d.Temperature)||void 0===e?void 0:e.Metric.Value,"\xb0c"]}),p&&Object(O.jsx)("button",{className:a?"favorite-city-btn":"not-favorite-city-btn",onClick:function(){return function(){var e=_.toggleFavoriteCity(p);b(D(e)),c(_.isFavoriteCity(p))}()},children:a?"Remove from Favorites":"Add to Favorites"})]}),Object(O.jsx)(F,{forecastList:f})]})}function K(e){var t=e.message,r=e.show;return Object(O.jsx)("div",{className:r?"error-message-modal-box open":"error-message-modal-box",children:Object(O.jsx)("p",{children:t})})}function G(){var e=Object(l.b)(),t=Object(n.useState)(!1),r=Object(x.a)(t,2),a=r[0],c=r[1],i=Object(n.useState)(""),s=Object(x.a)(i,2),f=s[0],v=s[1],d=function(){var t=Object(u.a)(o.a.mark((function t(r){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!/[^a-z]/i.test(r.target.value)){t.next=5;break}return v("You can only search with english letters."),c(!0),setTimeout((function(){c(!1)}),3e3),t.abrupt("return");case 5:if(r.target.value){t.next=8;break}return e(p("")),t.abrupt("return");case 8:return t.next=10,m.getSearchCitiesList(r.target.value);case 10:(n=t.sent)||(v("There seems to be a problem loading the desired content."),c(!0),setTimeout((function(){c(!1)}),3e3)),e(p(n));case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"home-box",children:[Object(O.jsx)(K,{show:a,message:f}),Object(O.jsx)("input",{className:"search-input",type:"text",placeholder:"Search a City",onChange:function(e){return d(e)}}),Object(O.jsx)(R,{}),Object(O.jsx)(V,{})]})}var U=function(){var e=Object(l.c)((function(e){return e.weatherReducer.isDarkMode})),t=Object(l.b)();Object(n.useEffect)((function(){r()}),[]);var r=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:navigator.geolocation.getCurrentPosition(function(){var e=Object(u.a)(o.a.mark((function e(r){var n,a,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={lat:r.coords.latitude,lng:r.coords.longitude},e.next=3,m.getCurrentLocationWeather(n);case 3:return a=e.sent,e.next=6,m.getCurrentConditions(a.Key);case 6:c=e.sent,t(b(a)),t(j(c));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),function(){var e=Object(u.a)(o.a.mark((function e(r){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(r),e.next=3,m.getCurrentConditions("215854");case 3:n=e.sent,t(j(n));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:e?"dark-app":"app",children:[Object(O.jsx)(h,{}),Object(O.jsxs)(f.c,{children:[Object(O.jsx)(f.a,{path:"/favorites",component:N}),Object(O.jsx)(f.a,{path:"/",component:G})]})]})},H=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,70)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;r(e),n(e),a(e),c(e),i(e)}))},P=r(19),Y=r(38),Z=r(9);var J=Object(P.b)({weatherReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case d.SET_SEARCH_CITIES_LIST:return Object(Z.a)(Object(Z.a)({},e),{},{searchCities:t.cities});case d.SET_SELECTED_CITY:return Object(Z.a)(Object(Z.a)({},e),{},{selectedCity:t.selectedCity});case d.SET_SELECTED_CITY_CONDITIONS:return Object(Z.a)(Object(Z.a)({},e),{},{selectedCityConditions:t.selectedCityConditions});case d.TOGGLE_TEMPERATUREVALUE_VALUE:return Object(Z.a)(Object(Z.a)({},e),{},{temperatureValue:t.temperatureValue});case d.TOGGLE_DARK_MODE:return Object(Z.a)(Object(Z.a)({},e),{},{isDarkMode:t.isDarkMode});default:return e}},favoritesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t.type===d.SET_FAVORITES_CITIES?Object(Z.a)(Object(Z.a)({},e),{},{favoriteCities:t.favoriteCities}):e}}),W=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||P.c,z=Object(P.d)(J,W(Object(P.a)(Y.a)));i.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(l.a,{store:z,children:Object(O.jsx)(v.a,{children:Object(O.jsx)(U,{})})})}),document.getElementById("root")),H()}},[[69,1,2]]]);
//# sourceMappingURL=main.25d5692c.chunk.js.map